(function(){async function i(){try{await n.start();n.invoke("LoadMessages")}catch(t){console.error(t);setTimeout(i,5e3)}}function r(n){t++;var i="",r="";r=n.isByRoomOwner?"self":"user";i+="<div id='cm-msg-"+t+"' class=\"chat-msg "+r+'">';i+='          <div class="cm-msg-text">';i+=u(n.message);i+="          <\/div>";i+="        <\/div>";$(".chat-logs").append(i);$("#cm-msg-"+t).hide().fadeIn(300);r=="self"&&$("#chat-input").val("");$(".chat-logs").stop().animate({scrollTop:$(".chat-logs")[0].scrollHeight},1e3)}function u(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var n=(new signalR.HubConnectionBuilder).withUrl("/chat").build(),t;n.onclose(i);i();t=0;$("#chat-submit").click(function(t){t.preventDefault();var i=$("#chat-input").val();if(i.trim()=="")return!1;n.invoke("Send",i)});n.on("NewMessage",function(n){if(Array.isArray(n)){$(".chat-logs").val("");for(var t=0;t<n.length;t++)r(n[t])}else r(n)});$("#chat-circle").click(function(){$("#chat-circle").toggle("scale");$(".chat-box").toggle("scale");$(".chat-logs").stop().animate({scrollTop:$(".chat-logs")[0].scrollHeight},1e3)});$(".chat-box-toggle").click(function(){$("#chat-circle").toggle("scale");$(".chat-box").toggle("scale")})})();